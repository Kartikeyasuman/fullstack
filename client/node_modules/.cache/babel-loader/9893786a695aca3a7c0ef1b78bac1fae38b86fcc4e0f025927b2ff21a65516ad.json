{"ast":null,"code":"import axios from\"axios\";import{useState}from\"react\";import Image from\"./Image\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PhotosUploader(_ref){let{addedPhotos,onChange}=_ref;const[photoLink,setPhotoLink]=useState('');async function addPhotoByLink(ev){ev.preventDefault();const{data:filename}=await axios.post('/upload-by-link',{link:photoLink});onChange(prev=>{return[...prev,filename];});setPhotoLink('');}function uploadPhoto(ev){const files=ev.target.files;const data=new FormData();for(let i=0;i<files.length;i++){data.append('photos',files[i]);}axios.post('/upload',data,{headers:{'Content-type':'multipart/form-data'}}).then(response=>{const{data:filenames}=response;onChange(prev=>{return[...prev,...filenames];});});}function removePhoto(ev,filename){ev.preventDefault();onChange([...addedPhotos.filter(photo=>photo!==filename)]);}function selectAsMainPhoto(ev,filename){ev.preventDefault();onChange([filename,...addedPhotos.filter(photo=>photo!==filename)]);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:photoLink,onChange:ev=>setPhotoLink(ev.target.value),type:\"text\",placeholder:'Add using a link ....jpg'}),/*#__PURE__*/_jsx(\"button\",{onClick:addPhotoByLink,className:\"bg-gray-200 px-4 rounded-2xl\",children:\"Add\\xA0photo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 grid gap-2 grid-cols-3 md:grid-cols-4 lg:grid-cols-6\",children:[addedPhotos.length>0&&addedPhotos.map(link=>/*#__PURE__*/_jsxs(\"div\",{className:\"h-32 flex relative\",children:[/*#__PURE__*/_jsx(Image,{className:\"rounded-2xl w-full object-cover\",src:link,alt:\"\"}),/*#__PURE__*/_jsx(\"button\",{onClick:ev=>removePhoto(ev,link),className:\"cursor-pointer absolute bottom-1 right-1 text-white bg-black bg-opacity-50 rounded-2xl py-2 px-3\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"})})}),/*#__PURE__*/_jsxs(\"button\",{onClick:ev=>selectAsMainPhoto(ev,link),className:\"cursor-pointer absolute bottom-1 left-1 text-white bg-black bg-opacity-50 rounded-2xl py-2 px-3\",children:[link===addedPhotos[0]&&/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z\",clipRule:\"evenodd\"})}),link!==addedPhotos[0]&&/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z\"})})]})]},link)),/*#__PURE__*/_jsxs(\"label\",{className:\"h-32 cursor-pointer flex items-center gap-1 justify-center border bg-transparent rounded-2xl p-2 text-2xl text-gray-600\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,className:\"hidden\",onChange:uploadPhoto}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-8 h-8\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z\"})}),\"Upload\"]})]})]});}","map":{"version":3,"names":["axios","useState","Image","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PhotosUploader","_ref","addedPhotos","onChange","photoLink","setPhotoLink","addPhotoByLink","ev","preventDefault","data","filename","post","link","prev","uploadPhoto","files","target","FormData","i","length","append","headers","then","response","filenames","removePhoto","filter","photo","selectAsMainPhoto","children","className","value","type","placeholder","onClick","map","src","alt","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","fillRule","clipRule","multiple"],"sources":["/Users/kartikeyasuman/Documents/Airbnb/client/src/PhotosUploader.js"],"sourcesContent":["\nimport axios from \"axios\";\nimport {useState} from \"react\";\nimport Image from \"./Image\";\n\nexport default function PhotosUploader({addedPhotos,onChange}) {\n  const [photoLink,setPhotoLink] = useState('');\n  async function addPhotoByLink(ev) {\n    ev.preventDefault();\n    const {data:filename} = await axios.post('/upload-by-link', {link: photoLink});\n    onChange(prev => {\n      return [...prev, filename];\n    });\n    setPhotoLink('');\n  }\n  function uploadPhoto(ev) {\n    const files = ev.target.files;\n    const data = new FormData();\n    for (let i = 0; i < files.length; i++) {\n      data.append('photos', files[i]);\n    }\n    axios.post('/upload', data, {\n      headers: {'Content-type':'multipart/form-data'}\n    }).then(response => {\n      const {data:filenames} = response;\n      onChange(prev => {\n        return [...prev, ...filenames];\n      });\n    })\n  }\n  function removePhoto(ev,filename) {\n    ev.preventDefault();\n    onChange([...addedPhotos.filter(photo => photo !== filename)]);\n  }\n  function selectAsMainPhoto(ev,filename) {\n    ev.preventDefault();\n    onChange([filename,...addedPhotos.filter(photo => photo !== filename)]);\n  }\n  return (\n    <>\n      <div className=\"flex gap-2\">\n        <input value={photoLink}\n               onChange={ev => setPhotoLink(ev.target.value)}\n               type=\"text\" placeholder={'Add using a link ....jpg'}/>\n        <button onClick={addPhotoByLink} className=\"bg-gray-200 px-4 rounded-2xl\">Add&nbsp;photo</button>\n      </div>\n      <div className=\"mt-2 grid gap-2 grid-cols-3 md:grid-cols-4 lg:grid-cols-6\">\n        {addedPhotos.length > 0 && addedPhotos.map(link => (\n          <div className=\"h-32 flex relative\" key={link}>\n            <Image className=\"rounded-2xl w-full object-cover\" src={link} alt=\"\"/>\n            <button onClick={ev => removePhoto(ev,link)} className=\"cursor-pointer absolute bottom-1 right-1 text-white bg-black bg-opacity-50 rounded-2xl py-2 px-3\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\" />\n              </svg>\n            </button>\n            <button onClick={ev => selectAsMainPhoto(ev,link)} className=\"cursor-pointer absolute bottom-1 left-1 text-white bg-black bg-opacity-50 rounded-2xl py-2 px-3\">\n              {link === addedPhotos[0] && (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-6 h-6\">\n                  <path fillRule=\"evenodd\" d=\"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z\" clipRule=\"evenodd\" />\n                </svg>\n              )}\n              {link !== addedPhotos[0] && (\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z\" />\n                </svg>\n              )}\n            </button>\n          </div>\n        ))}\n        <label className=\"h-32 cursor-pointer flex items-center gap-1 justify-center border bg-transparent rounded-2xl p-2 text-2xl text-gray-600\">\n          <input type=\"file\" multiple className=\"hidden\" onChange={uploadPhoto} />\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-8 h-8\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z\" />\n          </svg>\n          Upload\n        </label>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}