{"ast":null,"code":"var _jsxFileName = \"/Users/kartikeyasuman/Documents/Airbnb/client/src/pages/PlacesPage.js\",\n  _s = $RefreshSig$();\nimport Perks from \"../Perks\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link, Navigate, useParams } from \"react-router-dom\";\nimport PhotosUploader from \"../PhotosUploader\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PlacesFormPage() {\n  _s();\n  const action = useParams;\n  const {\n    id\n  } = useParams();\n  const [redirectToPlacesList, setRedirectToPlacesList] = useState(false);\n  const [photoLink, setPhotoLink] = useState('');\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n    axios.get('/places/' + id).then(response => {\n      const {\n        data\n      } = response;\n      setTitle(data.title);\n      setAddress(data.address);\n      setAddedPhotos(data.photos);\n      setDescription(data.description);\n      setPerks(data.perks);\n      setExtraInfo(data.extraInfo);\n      setCheckIn(data.checkIn);\n      setCheckOut(data.checkOut);\n      setMaxGuests(data.maxGuests);\n      setPrice(data.price);\n    });\n  }, [id]);\n  function inputHeader(text) {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl mt-4\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this);\n  }\n  function inputDescription(text) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 text-sm\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this);\n  }\n  function preInput(header, description) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [inputHeader(header), inputDescription(description)]\n    }, void 0, true);\n  }\n  async function savePlace(ev) {\n    ev.preventDefault();\n    const placeData = {\n      title,\n      address,\n      addedPhotos,\n      description,\n      perks,\n      extraInfo,\n      checkIn,\n      checkOut,\n      maxGuests,\n      price\n    };\n    if (id) {\n      // update\n      await axios.put('/places', {\n        id,\n        ...placeData\n      });\n      setRedirectToPlacesList(true);\n    } else {\n      // new place\n      await axios.post('/places', placeData);\n      setRedirectToPlacesList(true);\n    }\n  }\n  function uploadPhoto(ev) {\n    const files = ev.target.files;\n    const data = new FormData();\n    for (let i = 0; i < files.length; i++) {\n      data.append('photos', files[i]);\n    }\n    axios.post('/upload', data, {\n      headers: {\n        'Content-type': 'multipart/form-data'\n      }\n    }).then(response => {\n      const {\n        data: filenames\n      } = response;\n      setAddedPhotos(prev => {\n        return [...prev, ...filenames];\n      });\n    });\n  }\n  async function addPhotoByLink(ev) {\n    ev.preventDefault();\n    const {\n      data: filenames\n    } = await axios.post('/upload-by-link', {\n      link: photoLink\n    });\n    setAddedPhotos(prev => {\n      return [...prev, ...filenames];\n    });\n    setPhotoLink('');\n  }\n  async function addNewPlace(ev) {\n    ev.preventDefault();\n    const {\n      data\n    } = await axios.post('/places', {\n      title,\n      address,\n      addedPhotos,\n      perks,\n      description,\n      extraInfo,\n      checkIn,\n      checkOut,\n      maxGuests\n    });\n    setRedirectToPlacesList('/account/places');\n  }\n  if (redirectToPlacesList && action !== 'new') {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/ account/places '\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [action !== 'new' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"inline-flex gap-1 bg-primary text-white\",\n        children: \"Add a new place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), action == 'new' && /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 8\n  }, this);\n}\n_s(PlacesFormPage, \"+E0NTlUkTHtooc8WVTQFSkgQkQs=\", false, function () {\n  return [useParams];\n});\n_c = PlacesFormPage;\nvar _c;\n$RefreshReg$(_c, \"PlacesFormPage\");","map":{"version":3,"names":["Perks","useEffect","useState","axios","Link","Navigate","useParams","PhotosUploader","jsxDEV","_jsxDEV","Fragment","_Fragment","PlacesFormPage","_s","action","id","redirectToPlacesList","setRedirectToPlacesList","photoLink","setPhotoLink","get","then","response","data","setTitle","title","setAddress","address","setAddedPhotos","photos","setDescription","description","setPerks","perks","setExtraInfo","extraInfo","setCheckIn","checkIn","setCheckOut","checkOut","setMaxGuests","maxGuests","setPrice","price","inputHeader","text","className","children","fileName","_jsxFileName","lineNumber","columnNumber","inputDescription","preInput","header","savePlace","ev","preventDefault","placeData","addedPhotos","put","post","uploadPhoto","files","target","FormData","i","length","append","headers","filenames","prev","addPhotoByLink","link","addNewPlace","to","_c","$RefreshReg$"],"sources":["/Users/kartikeyasuman/Documents/Airbnb/client/src/pages/PlacesPage.js"],"sourcesContent":["import Perks from \"../Perks\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nimport { Link, Navigate, useParams } from \"react-router-dom\";\nimport PhotosUploader from \"../PhotosUploader\";\n\nexport default function PlacesFormPage() {\n    const action=useParams\n    const { id } = useParams();\n   \n    const [redirectToPlacesList, setRedirectToPlacesList  ] = useState(false);\n    const [photoLink, setPhotoLink] = useState('');\n    useEffect(() => {\n        if (!id) {\n            return;\n        }\n        axios.get('/places/' + id).then(response => {\n            const { data } = response;\n            setTitle(data.title);\n            setAddress(data.address);\n            setAddedPhotos(data.photos);\n            setDescription(data.description);\n            setPerks(data.perks);\n            setExtraInfo(data.extraInfo);\n            setCheckIn(data.checkIn);\n            setCheckOut(data.checkOut);\n            setMaxGuests(data.maxGuests);\n            setPrice(data.price);\n        });\n    }, [id]);\n    function inputHeader(text) {\n        return (\n            <h2 className=\"text-2xl mt-4\">{text}</h2>\n        );\n    }\n    function inputDescription(text) {\n        return (\n            <p className=\"text-gray-500 text-sm\">{text}</p>\n        );\n    }\n    function preInput(header, description) {\n        return (\n            <>\n                {inputHeader(header)}\n                {inputDescription(description)}\n            </>\n        );\n    }\n\n    async function savePlace(ev) {\n        ev.preventDefault();\n        const placeData = {\n            title, address, addedPhotos,\n            description, perks, extraInfo,\n            checkIn, checkOut, maxGuests, price,\n        };\n        if (id) {\n            // update\n            await axios.put('/places', {\n                id, ...placeData\n            });\n            setRedirectToPlacesList(true);\n        } else {\n            // new place\n            await axios.post('/places', placeData);\n            setRedirectToPlacesList(true);\n        }\n\n    }\n    function uploadPhoto(ev) {\n        const files = ev.target.files;\n        const data = new FormData();\n        for (let i = 0; i < files.length; i++) {\n          data.append('photos', files[i]);\n        }\n        axios.post('/upload', data, {\n          headers: {'Content-type':'multipart/form-data'}\n        }).then(response => {\n          const {data:filenames} = response;\n          setAddedPhotos(prev => {\n            return [...prev, ...filenames];\n          });\n        })\n      }\n   \n    async function addPhotoByLink(ev) {\n        ev.preventDefault();\n        const { data: filenames } = await axios.post('/upload-by-link', { link: photoLink });\n        setAddedPhotos(prev => {\n            return [...prev, ...filenames];\n        });\n        setPhotoLink('')\n    }\n   async function addNewPlace(ev){\n        ev.preventDefault()\n        const {data}= await axios.post('/places' , {\n            title,address,addedPhotos,perks,description,extraInfo,checkIn,checkOut,maxGuests\n        })\n       setRedirectToPlacesList('/account/places');\n    }\n    if (redirectToPlacesList && action!=='new') {\n        return <Navigate to={'/ account/places '} />\n    }\n\n    return (\n       <div>\n       {action!=='new' && (\n        <div className=\"text-center\">\n            <Link className=\"inline-flex gap-1 bg-primary text-white\">\n            Add a new place\n            </Link>\n        </div>\n       )}\n       {action=='new'&&(\n        <div>\n             \n        </div>\n       )}\n       </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}