{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{differenceInCalendarDays}from\"date-fns\";import{UserContext}from\"./UserContext\";import axios from\"axios\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookingWidget(_ref){let{places}=_ref;const[checkin,setCheckIN]=useState('');const[checkout,setCheckOut]=useState('');const[maxnoofguest,setMaxNoOfGuests]=useState(1);const[name,setName]=useState('');const[mobile,setEmail]=useState('');const[phone,setPhone]=useState('');const[redirect,setRedirect]=useState('');const{user}=useContext(UserContext);useEffect(()=>{if(user){setName(user.name);}},[user]);let numberOfNights=0;if(checkin&&checkout){numberOfNights=differenceInCalendarDays(new Date(checkout),new Date(checkin));}async function bookThisPlace(){const response=await axios.post('/bookings',{checkin,checkout,maxnoofguest,name,phone,place:places._id,price:numberOfNights*places.price});const bookingId=response.data._id;setRedirect(\"/account/bookings/\".concat(bookingId));}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:redirect});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow p-4 rounded-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl text-center\",children:[\"Price:$\",places.price,\"/ Night\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-2xl mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Check In  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:checkin,onChange:ev=>setCheckIN(ev.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Check Out \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:checkout,onChange:ev=>setCheckOut(ev.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Number Of Guests \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:maxnoofguest,onChange:ev=>setMaxNoOfGuests(ev.target.value)})]}),numberOfNights>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"py-3 px-4 border-t\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your full name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:ev=>setName(ev.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Phone number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:phone,onChange:ev=>setPhone(ev.target.value)})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:bookThisPlace,className:\"primary mt-4\",children:\" Book This Place\"}),numberOfNights>0&&/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",numberOfNights*places.price]})]})});}","map":{"version":3,"names":["useContext","useEffect","useState","differenceInCalendarDays","UserContext","axios","Navigate","jsx","_jsx","jsxs","_jsxs","BookingWidget","_ref","places","checkin","setCheckIN","checkout","setCheckOut","maxnoofguest","setMaxNoOfGuests","name","setName","mobile","setEmail","phone","setPhone","redirect","setRedirect","user","numberOfNights","Date","bookThisPlace","response","post","place","_id","price","bookingId","data","concat","to","children","className","type","value","onChange","ev","target","htmlFor","onClick"],"sources":["/Users/kartikeyasuman/Documents/Airbnb/client/src/BookingWidget.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { differenceInCalendarDays } from \"date-fns\";\nimport { UserContext } from \"./UserContext\";\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\nexport default function BookingWidget({ places }) {\n    const [checkin, setCheckIN] = useState('')\n    const [checkout, setCheckOut] = useState('')\n    const [maxnoofguest, setMaxNoOfGuests] = useState(1)\n    const [name, setName] = useState('')\n    const [mobile, setEmail] = useState('')\n    const [phone,setPhone] = useState('');\n    const [redirect,setRedirect] = useState('');\n    const {user} = useContext(UserContext);\n    useEffect(() => {\n        if (user) {\n          setName(user.name);\n        }\n      }, [user]);\n    let numberOfNights = 0\n    if (checkin && checkout) {\n        numberOfNights = differenceInCalendarDays(new Date(checkout), new Date(checkin))\n    }\n    async function bookThisPlace() {\n        const response = await axios.post('/bookings', {\n          checkin,checkout,maxnoofguest,name,phone,\n          place:places._id,\n          price:numberOfNights * places.price,\n        });\n        const bookingId = response.data._id;\n        setRedirect(`/account/bookings/${bookingId}`);\n      }\n    \n      if (redirect) {\n        return <Navigate to={redirect} />\n      }\n    return (\n        <div>\n            <div className=\"bg-white shadow p-4 rounded-2xl\">\n                <div className=\"text-2xl text-center\">\n                    Price:${places.price}/ Night\n                </div>\n                <div className=\"border rounded-2xl mt-4\">\n                    <div className=\"py-3 px-4\">\n                        <label>Check In  </label>\n                        <input type=\"date\" value={checkin} onChange={ev => setCheckIN(ev.target.value)} />\n                    </div>\n                    <div className=\"py-3 px-4 border-t\">\n                        <label htmlFor=\"\">Check Out </label>\n                        <input type=\"date\" value={checkout} onChange={ev => setCheckOut(ev.target.value)} />\n                    </div>\n\n                    <div className=\"py-3 px-4 border-t\">\n                        <label htmlFor=\"\">Number Of Guests </label>\n                        <input type=\"number\" value={maxnoofguest} onChange={ev => setMaxNoOfGuests(ev.target.value)} />\n                    </div>\n                    {numberOfNights > 0 && (\n                        <div className=\"py-3 px-4 border-t\">\n                            <label>Your full name:</label>\n                            <input type=\"text\"\n                                value={name}\n                                onChange={ev => setName(ev.target.value)} />\n                            <label>Phone number:</label>\n                            <input type=\"tel\"\n                                value={phone}\n                                onChange={ev => setPhone(ev.target.value)} />\n                        </div>\n                    )}\n                </div>\n                {/* {numberOfNights > 0 && (\n                    <div className=\"py-3 px-4 border-t\">\n                        <label htmlFor=\"\">Your Full Name </label>\n                        <input type=\"text\" value={checkout} onChange={ev => setCheckOut(ev.target.value)} />\n                    </div>\n                )} */}\n                <button onClick={bookThisPlace} className=\"primary mt-4\"> Book This Place</button>\n                {numberOfNights > 0 && (\n                    <span>${numberOfNights * places.price}</span>\n                )}\n            </div>\n        </div>\n    )\n}"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACvD,OAASC,wBAAwB,KAAQ,UAAU,CACnD,OAASC,WAAW,KAAQ,eAAe,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAC5C,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC5C,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,YAAY,CAAEC,gBAAgB,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACpD,KAAM,CAACkB,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACoB,MAAM,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CACvC,KAAM,CAACsB,KAAK,CAACC,QAAQ,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CACrC,KAAM,CAACwB,QAAQ,CAACC,WAAW,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC3C,KAAM,CAAC0B,IAAI,CAAC,CAAG5B,UAAU,CAACI,WAAW,CAAC,CACtCH,SAAS,CAAC,IAAM,CACZ,GAAI2B,IAAI,CAAE,CACRP,OAAO,CAACO,IAAI,CAACR,IAAI,CAAC,CACpB,CACF,CAAC,CAAE,CAACQ,IAAI,CAAC,CAAC,CACZ,GAAI,CAAAC,cAAc,CAAG,CAAC,CACtB,GAAIf,OAAO,EAAIE,QAAQ,CAAE,CACrBa,cAAc,CAAG1B,wBAAwB,CAAC,GAAI,CAAA2B,IAAI,CAACd,QAAQ,CAAC,CAAE,GAAI,CAAAc,IAAI,CAAChB,OAAO,CAAC,CAAC,CACpF,CACA,cAAe,CAAAiB,aAAaA,CAAA,CAAG,CAC3B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA3B,KAAK,CAAC4B,IAAI,CAAC,WAAW,CAAE,CAC7CnB,OAAO,CAACE,QAAQ,CAACE,YAAY,CAACE,IAAI,CAACI,KAAK,CACxCU,KAAK,CAACrB,MAAM,CAACsB,GAAG,CAChBC,KAAK,CAACP,cAAc,CAAGhB,MAAM,CAACuB,KAChC,CAAC,CAAC,CACF,KAAM,CAAAC,SAAS,CAAGL,QAAQ,CAACM,IAAI,CAACH,GAAG,CACnCR,WAAW,sBAAAY,MAAA,CAAsBF,SAAS,CAAE,CAAC,CAC/C,CAEA,GAAIX,QAAQ,CAAE,CACZ,mBAAOlB,IAAA,CAACF,QAAQ,EAACkC,EAAE,CAAEd,QAAS,CAAE,CAAC,CACnC,CACF,mBACIlB,IAAA,QAAAiC,QAAA,cACI/B,KAAA,QAAKgC,SAAS,CAAC,iCAAiC,CAAAD,QAAA,eAC5C/B,KAAA,QAAKgC,SAAS,CAAC,sBAAsB,CAAAD,QAAA,EAAC,SAC3B,CAAC5B,MAAM,CAACuB,KAAK,CAAC,SACzB,EAAK,CAAC,cACN1B,KAAA,QAAKgC,SAAS,CAAC,yBAAyB,CAAAD,QAAA,eACpC/B,KAAA,QAAKgC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACtBjC,IAAA,UAAAiC,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBjC,IAAA,UAAOmC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAE9B,OAAQ,CAAC+B,QAAQ,CAAEC,EAAE,EAAI/B,UAAU,CAAC+B,EAAE,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,EACjF,CAAC,cACNlC,KAAA,QAAKgC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/BjC,IAAA,UAAOwC,OAAO,CAAC,EAAE,CAAAP,QAAA,CAAC,YAAU,CAAO,CAAC,cACpCjC,IAAA,UAAOmC,IAAI,CAAC,MAAM,CAACC,KAAK,CAAE5B,QAAS,CAAC6B,QAAQ,CAAEC,EAAE,EAAI7B,WAAW,CAAC6B,EAAE,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,EACnF,CAAC,cAENlC,KAAA,QAAKgC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/BjC,IAAA,UAAOwC,OAAO,CAAC,EAAE,CAAAP,QAAA,CAAC,mBAAiB,CAAO,CAAC,cAC3CjC,IAAA,UAAOmC,IAAI,CAAC,QAAQ,CAACC,KAAK,CAAE1B,YAAa,CAAC2B,QAAQ,CAAEC,EAAE,EAAI3B,gBAAgB,CAAC2B,EAAE,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,EAC9F,CAAC,CACLf,cAAc,CAAG,CAAC,eACfnB,KAAA,QAAKgC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/BjC,IAAA,UAAAiC,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BjC,IAAA,UAAOmC,IAAI,CAAC,MAAM,CACdC,KAAK,CAAExB,IAAK,CACZyB,QAAQ,CAAEC,EAAE,EAAIzB,OAAO,CAACyB,EAAE,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cAChDpC,IAAA,UAAAiC,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5BjC,IAAA,UAAOmC,IAAI,CAAC,KAAK,CACbC,KAAK,CAAEpB,KAAM,CACbqB,QAAQ,CAAEC,EAAE,EAAIrB,QAAQ,CAACqB,EAAE,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,EAChD,CACR,EACA,CAAC,cAONpC,IAAA,WAAQyC,OAAO,CAAElB,aAAc,CAACW,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,kBAAgB,CAAQ,CAAC,CACjFZ,cAAc,CAAG,CAAC,eACfnB,KAAA,SAAA+B,QAAA,EAAM,GAAC,CAACZ,cAAc,CAAGhB,MAAM,CAACuB,KAAK,EAAO,CAC/C,EACA,CAAC,CACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}