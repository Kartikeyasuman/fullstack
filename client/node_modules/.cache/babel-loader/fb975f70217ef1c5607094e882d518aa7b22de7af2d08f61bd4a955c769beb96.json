{"ast":null,"code":"var _jsxFileName = \"/Users/kartikeyasuman/Documents/Airbnb/client/src/pages/PlacesPage.js\",\n  _s = $RefreshSig$();\nimport Perks from \"../Perks\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link, Navigate, useParams } from \"react-router-dom\";\nimport PhotosUploader from \"../PhotosUploader\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PlacesFormPage() {\n  _s();\n  const action = useParams;\n  const {\n    id\n  } = useParams();\n  const [redirectToPlacesList, setRedirectToPlacesList] = useState(false);\n  const [photoLink, setPhotoLink] = useState('');\n  function inputHeader(text) {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl mt-4\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }, this);\n  }\n  function inputDescription(text) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 text-sm\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this);\n  }\n  function preInput(header, description) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [inputHeader(header), inputDescription(description)]\n    }, void 0, true);\n  }\n  async function savePlace(ev) {\n    ev.preventDefault();\n    const placeData = {\n      title,\n      address,\n      addedPhotos,\n      description,\n      perks,\n      extraInfo,\n      checkIn,\n      checkOut,\n      maxGuests,\n      price\n    };\n    if (id) {\n      // update\n      await axios.put('/places', {\n        id,\n        ...placeData\n      });\n      setRedirectToPlacesList(true);\n    } else {\n      // new place\n      await axios.post('/places', placeData);\n      setRedirectToPlacesList(true);\n    }\n  }\n  function uploadPhoto(ev) {\n    const files = ev.target.files;\n    const data = new FormData();\n    for (let i = 0; i < files.length; i++) {\n      data.append('photos', files[i]);\n    }\n    axios.post('/upload', data, {\n      headers: {\n        'Content-type': 'multipart/form-data'\n      }\n    }).then(response => {\n      const {\n        data: filenames\n      } = response;\n      setAddedPhotos(prev => {\n        return [...prev, ...filenames];\n      });\n    });\n  }\n  async function addPhotoByLink(ev) {\n    ev.preventDefault();\n    const {\n      data: filenames\n    } = await axios.post('/upload-by-link', {\n      link: photoLink\n    });\n    setAddedPhotos(prev => {\n      return [...prev, ...filenames];\n    });\n    setPhotoLink('');\n  }\n  async function addNewPlace(ev) {\n    ev.preventDefault();\n    const {\n      data\n    } = await axios.post('/places', {\n      title,\n      address,\n      addedPhotos,\n      perks,\n      description,\n      extraInfo,\n      checkIn,\n      checkOut,\n      maxGuests\n    });\n    setRedirectToPlacesList('/account/places');\n  }\n  if (redirectToPlacesList && action !== 'new') {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/ account/places '\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [action !== 'new' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"inline-flex gap-1 bg-primary text-white\",\n        children: \"Add a new place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), action == 'new' && /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 8\n  }, this);\n}\n_s(PlacesFormPage, \"Ndo8W2nVIZgj9WRO6M2U/7nV7Dg=\", false, function () {\n  return [useParams];\n});\n_c = PlacesFormPage;\nvar _c;\n$RefreshReg$(_c, \"PlacesFormPage\");","map":{"version":3,"names":["Perks","useEffect","useState","axios","Link","Navigate","useParams","PhotosUploader","jsxDEV","_jsxDEV","Fragment","_Fragment","PlacesFormPage","_s","action","id","redirectToPlacesList","setRedirectToPlacesList","photoLink","setPhotoLink","inputHeader","text","className","children","fileName","_jsxFileName","lineNumber","columnNumber","inputDescription","preInput","header","description","savePlace","ev","preventDefault","placeData","title","address","addedPhotos","perks","extraInfo","checkIn","checkOut","maxGuests","price","put","post","uploadPhoto","files","target","data","FormData","i","length","append","headers","then","response","filenames","setAddedPhotos","prev","addPhotoByLink","link","addNewPlace","to","_c","$RefreshReg$"],"sources":["/Users/kartikeyasuman/Documents/Airbnb/client/src/pages/PlacesPage.js"],"sourcesContent":["import Perks from \"../Perks\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nimport { Link, Navigate, useParams } from \"react-router-dom\";\nimport PhotosUploader from \"../PhotosUploader\";\n\nexport default function PlacesFormPage() {\n    const action=useParams\n    const { id } = useParams();\n   \n    const [redirectToPlacesList, setRedirectToPlacesList  ] = useState(false);\n    const [photoLink, setPhotoLink] = useState('');\n   \n    function inputHeader(text) {\n        return (\n            <h2 className=\"text-2xl mt-4\">{text}</h2>\n        );\n    }\n    function inputDescription(text) {\n        return (\n            <p className=\"text-gray-500 text-sm\">{text}</p>\n        );\n    }\n    function preInput(header, description) {\n        return (\n            <>\n                {inputHeader(header)}\n                {inputDescription(description)}\n            </>\n        );\n    }\n\n    async function savePlace(ev) {\n        ev.preventDefault();\n        const placeData = {\n            title, address, addedPhotos,\n            description, perks, extraInfo,\n            checkIn, checkOut, maxGuests, price,\n        };\n        if (id) {\n            // update\n            await axios.put('/places', {\n                id, ...placeData\n            });\n            setRedirectToPlacesList(true);\n        } else {\n            // new place\n            await axios.post('/places', placeData);\n            setRedirectToPlacesList(true);\n        }\n\n    }\n    function uploadPhoto(ev) {\n        const files = ev.target.files;\n        const data = new FormData();\n        for (let i = 0; i < files.length; i++) {\n          data.append('photos', files[i]);\n        }\n        axios.post('/upload', data, {\n          headers: {'Content-type':'multipart/form-data'}\n        }).then(response => {\n          const {data:filenames} = response;\n          setAddedPhotos(prev => {\n            return [...prev, ...filenames];\n          });\n        })\n      }\n   \n    async function addPhotoByLink(ev) {\n        ev.preventDefault();\n        const { data: filenames } = await axios.post('/upload-by-link', { link: photoLink });\n        setAddedPhotos(prev => {\n            return [...prev, ...filenames];\n        });\n        setPhotoLink('')\n    }\n   async function addNewPlace(ev){\n        ev.preventDefault()\n        const {data}= await axios.post('/places' , {\n            title,address,addedPhotos,perks,description,extraInfo,checkIn,checkOut,maxGuests\n        })\n       setRedirectToPlacesList('/account/places');\n    }\n    if (redirectToPlacesList && action!=='new') {\n        return <Navigate to={'/ account/places '} />\n    }\n\n    return (\n       <div>\n       {action!=='new' && (\n        <div className=\"text-center\">\n            <Link className=\"inline-flex gap-1 bg-primary text-white\">\n            Add a new place\n            </Link>\n        </div>\n       )}\n       {action=='new'&&(\n        <div>\n             \n        </div>\n       )}\n       </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}