{"ast":null,"code":"import React,{useContext}from'react';import{UserContext}from'../UserContext';import{Link,Navigate,useParams}from'react-router-dom';import{useState}from'react';import axios from'axios';import PlacesPage from'./PlacesPage';import AccountNav from'./AccountNav';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfilePage(){const[redirect,setRedirect]=useState(null);const{user,ready,setUser}=useContext(UserContext);let{subpage}=useParams();// Move useParams to the top\nif(!ready){return'Loading...';}if(ready&&!user&&!redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/login'});}if(subpage===undefined){subpage='profile';}// console.log(subpage); // Uncomment if you need to debug\nasync function logout(){await axios.post('/logout');setRedirect('/');setUser(null);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:redirect});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AccountNav,{}),subpage==='profile'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-lg mx-auto\",children:[\"Logged in as \",user.name,\"(\",user.email,\")\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"primary max-w-sm mt-2\",onClick:logout,children:\"Logout\"})]}),subpage==='places'&&/*#__PURE__*/_jsx(PlacesPage,{})]});}","map":{"version":3,"names":["React","useContext","UserContext","Link","Navigate","useParams","useState","axios","PlacesPage","AccountNav","jsx","_jsx","jsxs","_jsxs","ProfilePage","redirect","setRedirect","user","ready","setUser","subpage","to","undefined","logout","post","children","className","name","email","onClick"],"sources":["/Users/kartikeyasuman/Documents/Airbnb/client/src/pages/ProfilePage.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { UserContext } from '../UserContext';\nimport { Link, Navigate, useParams, } from 'react-router-dom';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport PlacesPage from './PlacesPage';\nimport AccountNav from './AccountNav';\n\nexport default function ProfilePage() {\n    const[redirect,setRedirect]=useState(null)\n    const { user, ready ,setUser} = useContext(UserContext);\n    let { subpage } = useParams(); // Move useParams to the top\n\n    if (!ready) {\n        return 'Loading...';\n    }\n\n    if (ready && !user && !redirect) {\n        return <Navigate to={'/login'} />;\n    }\n    if (subpage === undefined) {\n        subpage = 'profile';\n      }\n    // console.log(subpage); // Uncomment if you need to debug\n    async function logout(){\n       await axios.post('/logout')\n       setRedirect('/')\n       setUser(null)\n    }\n\n   \n      if(redirect){\n        return <Navigate to={redirect}/>\n      }\n    return (\n        <div>\n          <AccountNav></AccountNav>\n    {subpage==='profile' &&(\n            <div className=\"text-center max-w-lg mx-auto\">\n                Logged in as {user.name}({user.email})<br/>\n                <button className='primary max-w-sm mt-2' onClick={logout}>Logout</button>\n            </div>\n        )}\n        {\n            subpage==='places' &&(\n                <PlacesPage></PlacesPage>\n            )\n        }\n        </div>\n    );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,OAASC,IAAI,CAAEC,QAAQ,CAAEC,SAAS,KAAS,kBAAkB,CAC7D,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,cAAe,SAAS,CAAAC,WAAWA,CAAA,CAAG,CAClC,KAAK,CAACC,QAAQ,CAACC,WAAW,CAAC,CAACV,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAAEW,IAAI,CAAEC,KAAK,CAAEC,OAAO,CAAC,CAAGlB,UAAU,CAACC,WAAW,CAAC,CACvD,GAAI,CAAEkB,OAAQ,CAAC,CAAGf,SAAS,CAAC,CAAC,CAAE;AAE/B,GAAI,CAACa,KAAK,CAAE,CACR,MAAO,YAAY,CACvB,CAEA,GAAIA,KAAK,EAAI,CAACD,IAAI,EAAI,CAACF,QAAQ,CAAE,CAC7B,mBAAOJ,IAAA,CAACP,QAAQ,EAACiB,EAAE,CAAE,QAAS,CAAE,CAAC,CACrC,CACA,GAAID,OAAO,GAAKE,SAAS,CAAE,CACvBF,OAAO,CAAG,SAAS,CACrB,CACF;AACA,cAAe,CAAAG,MAAMA,CAAA,CAAE,CACpB,KAAM,CAAAhB,KAAK,CAACiB,IAAI,CAAC,SAAS,CAAC,CAC3BR,WAAW,CAAC,GAAG,CAAC,CAChBG,OAAO,CAAC,IAAI,CAAC,CAChB,CAGE,GAAGJ,QAAQ,CAAC,CACV,mBAAOJ,IAAA,CAACP,QAAQ,EAACiB,EAAE,CAAEN,QAAS,CAAC,CAAC,CAClC,CACF,mBACIF,KAAA,QAAAY,QAAA,eACEd,IAAA,CAACF,UAAU,GAAa,CAAC,CAC9BW,OAAO,GAAG,SAAS,eACZP,KAAA,QAAKa,SAAS,CAAC,8BAA8B,CAAAD,QAAA,EAAC,eAC7B,CAACR,IAAI,CAACU,IAAI,CAAC,GAAC,CAACV,IAAI,CAACW,KAAK,CAAC,GAAC,cAAAjB,IAAA,QAAI,CAAC,cAC3CA,IAAA,WAAQe,SAAS,CAAC,uBAAuB,CAACG,OAAO,CAAEN,MAAO,CAAAE,QAAA,CAAC,QAAM,CAAQ,CAAC,EACzE,CACR,CAEGL,OAAO,GAAG,QAAQ,eACdT,IAAA,CAACH,UAAU,GAAa,CAC3B,EAEA,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}